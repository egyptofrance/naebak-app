# قوالب البريد الإلكتروني - نائبك.com

هذا المجلد يحتوي على قوالب HTML للإيميلات المستخدمة في نظام المصادقة.

## القوالب المتوفرة

### 1. تفعيل الحساب (`account-activation.html`) ✨ جديد
يُستخدم عند تسجيل حساب جديد لتفعيل الحساب.

**المتغيرات:**
- `{{ .ConfirmationURL }}` - رابط تفعيل الحساب

**المميزات:**
- تصميم احترافي بألوان المنصة (أخضر)
- قائمة بمميزات المنصة بعد التفعيل
- رسائل ترحيبية وتشجيعية
- تعليمات واضحة للمستخدم
- تصميم متجاوب للجوال

**مثال على الاستخدام في Supabase:**
```
انتقل إلى: Authentication > Email Templates > Confirm signup
الصق محتوى ملف account-activation.html
```

### 2. استعادة كلمة المرور (`password-reset.html`) ✨ جديد
يُستخدم عند طلب إعادة تعيين كلمة المرور.

**المتغيرات:**
- `{{ .ConfirmationURL }}` - رابط إعادة تعيين كلمة المرور

**المميزات:**
- تصميم تحذيري بألوان حمراء للأمان
- نصائح أمنية شاملة
- تحذيرات واضحة للمستخدم
- معلومات الاتصال للدعم الأمني
- إرشادات للحالات المشبوهة

**مثال على الاستخدام في Supabase:**
```
انتقل إلى: Authentication > Email Templates > Reset password
الصق محتوى ملف password-reset.html
```

### 3. تأكيد البريد الإلكتروني (`confirm-email.html`) - قديم
⚠️ **مهجور:** استخدم `account-activation.html` بدلاً منه

### 4. إعادة تعيين كلمة المرور (`reset-password.html`) - قديم  
⚠️ **مهجور:** استخدم `password-reset.html` بدلاً منه

## إعداد القوالب في Supabase

### الخطوة 1: الدخول إلى Supabase Dashboard
1. افتح [Supabase Dashboard](https://supabase.com/dashboard)
2. اختر مشروعك
3. انتقل إلى **Authentication** > **Email Templates**

### الخطوة 2: تفعيل Email Provider
1. انتقل إلى **Authentication** > **Providers**
2. تأكد من تفعيل **Email**
3. قم بإعداد SMTP Settings (اختياري - يمكن استخدام Supabase الافتراضي)

### الخطوة 3: تحديث قوالب البريد
#### لتأكيد البريد الإلكتروني:
1. انتقل إلى **Email Templates** > **Confirm signup**
2. انسخ محتوى `confirm-email.html`
3. الصقه في حقل **Message Body**
4. احفظ التغييرات

#### لإعادة تعيين كلمة المرور:
1. انتقل إلى **Email Templates** > **Reset password**
2. انسخ محتوى `reset-password.html`
3. الصقه في حقل **Message Body**
4. احفظ التغييرات

### الخطوة 4: إضافة Redirect URLs
1. انتقل إلى **Authentication** > **URL Configuration**
2. أضف الروابط التالية في **Redirect URLs**:
   ```
   http://localhost:3000/auth/callback
   https://naebak.com/auth/callback
   https://naebak-com.vercel.app/auth/callback
   https://naebak-com-git-v120-auth-naebaks-projects.vercel.app/auth/callback
   ```

## المتغيرات المتاحة في Supabase

Supabase يوفر المتغيرات التالية التي يمكن استخدامها في القوالب:

- `{{ .ConfirmationURL }}` - رابط تأكيد البريد الإلكتروني
- `{{ .Token }}` - رمز التأكيد
- `{{ .TokenHash }}` - hash الرمز
- `{{ .SiteURL }}` - رابط الموقع الرئيسي
- `{{ .Email }}` - البريد الإلكتروني للمستخدم
- `{{ .RedirectTo }}` - رابط إعادة التوجيه بعد التأكيد

## اختبار القوالب

### اختبار تأكيد البريد:
1. سجل حساب جديد على `/register`
2. تحقق من بريدك الإلكتروني
3. تأكد من استلام البريد بالتصميم الصحيح
4. انقر على زر التأكيد

### اختبار إعادة تعيين كلمة المرور:
1. اذهب إلى `/forgot-password`
2. أدخل بريدك الإلكتروني
3. تحقق من بريدك الإلكتروني
4. تأكد من استلام البريد بالتصميم الصحيح
5. انقر على زر إعادة التعيين

## التخصيص

يمكنك تخصيص القوالب بتعديل:
- الألوان (حالياً: #004705 أخضر داكن)
- الخطوط
- الشعار
- روابط وسائل التواصل الاجتماعي
- النصوص والرسائل

## الدعم الفني

إذا واجهت أي مشاكل في إعداد القوالب:
1. تأكد من أن Email Provider مفعل
2. تأكد من إضافة Redirect URLs
3. تحقق من سجلات Supabase (Logs)
4. تأكد من أن SMTP مُعد بشكل صحيح (إذا كنت تستخدم SMTP مخصص)

## ملاحظات مهمة

⚠️ **تنبيه:**
- القوالب تستخدم HTML inline CSS لضمان التوافق مع جميع عملاء البريد
- تأكد من اختبار القوالب على عملاء بريد مختلفة (Gmail, Outlook, Apple Mail)
- الروابط في القوالب يجب أن تكون HTTPS في الإنتاج
- تأكد من أن المتغيرات `{{ }}` مكتوبة بشكل صحيح

## الإصدار

- **الإصدار:** v1.2.0
- **التاريخ:** 2025-10-06
- **المطور:** نائبك.com Team
